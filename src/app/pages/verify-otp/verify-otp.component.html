  <style>
    body, html {
      height: 100%;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f8f9fa;
    }

    .verify-otp-page {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .verify-otp-card {
      width: 100%;
      max-width: 1100px;
      background: #fff;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      border-radius: 12px;
      overflow: hidden;
      height: 500px;
    }

    .left-side {
      background: linear-gradient(135deg, #198754, #28a745);
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      padding: 2rem;
      text-align: center;
    }

    .left-side svg {
      width: 70%;
      max-width: 280px;
      margin-bottom: 1.5rem;
      animation: float 3s ease-in-out infinite;
    }

    .welcome-text {
      margin-top: 1rem;
    }

    .welcome-text h2 {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }

    .welcome-text p {
      font-size: 1rem;
      opacity: 0.9;
      line-height: 1.5;
      margin-bottom: 0;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .right-side {
      padding: 3rem 4rem;
    }

    .form-control {
      border-radius: 8px;
    }

    .btn-verify-otp {
      background: #198754;
      border: none;
      border-radius: 8px;
      padding: 0.75rem;
      font-size: 1rem;
      color: #fff;
      transition: all 0.3s ease;
    }

    .btn-verify-otp:hover {
      background: #157347;
    }

    .btn-resend {
      background: #6c757d;
      border: none;
      border-radius: 8px;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
      color: #fff;
      transition: all 0.3s ease;
    }

    .btn-resend:hover:not(:disabled) {
      background: #5a6268;
    }

    .btn-resend:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .extra-links {
      font-size: 0.9rem;
      margin-top: 1rem;
    }

    .extra-links a {
      text-decoration: none;
      color: #198754;
      transition: 0.3s;
    }

    .extra-links a:hover {
      text-decoration: underline;
    }

    .form-control.is-invalid {
      border-color: #dc3545;
      box-shadow: 0 0 0 0.2rem rgba(220, 53, 69, 0.25);
    }

    .invalid-feedback {
      display: block;
      font-size: 0.875rem;
      color: #dc3545;
      margin-top: 0.25rem;
    }

    .btn-verify-otp:disabled {
      background: #6c757d;
      cursor: not-allowed;
    }

    .spinner-border-sm {
      width: 1rem;
      height: 1rem;
    }

    .otp-info {
      background: #e7f3ff;
      border-left: 4px solid #0066cc;
      padding: 1rem;
      border-radius: 4px;
      margin-bottom: 1.5rem;
    }

    .otp-info h6 {
      color: #0066cc;
      margin-bottom: 0.5rem;
    }

    .otp-info p {
      margin-bottom: 0;
      font-size: 0.9rem;
      color: #6c757d;
    }

    .otp-input {
      text-align: center;
      font-size: 1.5rem;
      font-weight: 600;
      letter-spacing: 0.5rem;
      padding: 1rem;
    }

    .countdown-timer {
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 0.75rem;
      text-align: center;
      margin-bottom: 1rem;
    }

    .countdown-timer.expired {
      background: #ffe6e6;
      border-color: #dc3545;
      color: #dc3545;
    }

    .countdown-timer.active {
      background: #e7f3ff;
      border-color: #0066cc;
      color: #0066cc;
    }

    .email-display {
      background: #f8f9fa;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      font-family: monospace;
      font-size: 0.9rem;
      color: #198754;
      margin-bottom: 1rem;
      text-align: center;
    }
  </style>

  <div class="verify-otp-page container">
    <div class="verify-otp-card row g-0">
      <!-- Left Side -->
      <div class="col-md-6 left-side">
        <!-- OTP Verification SVG Illustration -->
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 320 240">
          <!-- Mobile Phone -->
          <rect x="130" y="60" width="60" height="100" fill="#fff" opacity="0.9" rx="8"/>
          <rect x="135" y="70" width="50" height="70" fill="#198754" opacity="0.2" rx="4"/>
          <circle cx="160" cy="150" r="4" fill="#198754"/>
          
          <!-- OTP Display on Phone -->
          <text x="160" y="95" fill="#198754" font-size="12" font-weight="bold" text-anchor="middle">123456</text>
          
          <!-- Email Icon -->
          <rect x="60" y="80" width="50" height="35" fill="#fff" opacity="0.9" rx="6"/>
          <path d="M65 90 L85 100 L105 90" stroke="#198754" stroke-width="2" fill="none"/>
          <rect x="65" y="90" width="40" height="20" fill="none" stroke="#198754" stroke-width="1"/>
          
          <!-- Shield with Checkmark -->
          <circle cx="240" cy="100" r="20" fill="#fff" opacity="0.9"/>
          <path d="M230 100 L238 108 L250 92" stroke="#198754" stroke-width="3" fill="none"/>
          
          <!-- Clock/Timer -->
          <circle cx="80" cy="180" r="15" fill="#fff" opacity="0.8"/>
          <path d="M80 170 L80 180 L87 187" stroke="#198754" stroke-width="2" fill="none"/>
          <text x="80" y="210" fill="#fff" font-size="8" text-anchor="middle" opacity="0.8">45s</text>
          
          <!-- Security Lock -->
          <rect x="240" y="150" width="30" height="25" fill="#fff" opacity="0.9" rx="4"/>
          <rect x="245" y="140" width="20" height="15" fill="none" stroke="#fff" stroke-width="2" rx="10"/>
          <circle cx="255" cy="160" r="2" fill="#198754"/>
          
          <!-- Floating Numbers -->
          <text x="50" y="50" fill="#fff" font-size="18" opacity="0.6" font-weight="bold">1</text>
          <text x="290" y="60" fill="#fff" font-size="16" opacity="0.5" font-weight="bold">2</text>
          <text x="40" y="140" fill="#fff" font-size="14" opacity="0.7" font-weight="bold">3</text>
          <text x="280" y="200" fill="#fff" font-size="20" opacity="0.4" font-weight="bold">4</text>
          
          <!-- Arrow pointing to phone -->
          <path d="M110 100 Q120 95, 130 100" stroke="#fff" stroke-width="2" fill="none" opacity="0.8"/>
          <path d="M127 97 L130 100 L127 103" stroke="#fff" stroke-width="2" fill="none" opacity="0.8"/>
        </svg>
        
        <div class="welcome-text">
          <h2>Verify Your Email</h2>
          <p>We've sent a 6-digit verification code to your email. Enter the code below to proceed with your password reset.</p>
        </div>
      </div>

      <!-- Right Side -->
      <div class="col-md-6 right-side">
        <a routerLink="/forgot-password" class="btn btn-outline-secondary mb-3" style="display:inline-flex;align-items:center;gap:8px;text-decoration:none;">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 20 20"><path d="M9.707 15.707a1 1 0 01-1.414 0l-5-5a1 1 0 010-1.414l5-5a1 1 0 111.414 1.414L6.414 9H17a1 1 0 110 2H6.414l3.293 3.293a1 1 0 010 1.414z"/></svg>
          Back
        </a>
        
        <h3 class="mb-3 fw-bold text-center">Enter Verification Code</h3>
        
        <div class="email-display">
          <strong>Sent to:</strong> {{ email }}
        </div>
        
        <div class="otp-info">
          <h6><i class="fas fa-info-circle me-2"></i>Security Code</h6>
          <p>Please enter the 6-digit code we sent to your email. The code expires in 45 seconds.</p>
        </div>
        
        <div class="countdown-timer" [class.expired]="countdown <= 0" [class.active]="countdown > 0">
          <div *ngIf="countdown > 0">
            <strong>Time remaining:</strong> {{ getFormattedCountdown() }}
          </div>
          <div *ngIf="countdown <= 0" class="text-danger">
            <strong>Code expired</strong> - Please request a new one
          </div>
        </div>
        
        <form [formGroup]="verifyOtpForm" (ngSubmit)="onSubmit()">
          <div class="mb-3">
            <label for="otp" class="form-label">Verification Code</label>
            <input 
              type="text" 
              id="otp" 
              formControlName="otp"
              class="form-control otp-input"
              [class.is-invalid]="isFieldInvalid('otp')"
              placeholder="000000"
              maxlength="6"
              (input)="onOtpInput($event)">
            <div *ngIf="isFieldInvalid('otp')" class="invalid-feedback">
              <div *ngIf="otp?.errors?.['required']">Verification code is required</div>
              <div *ngIf="otp?.errors?.['pattern'] || otp?.errors?.['minlength'] || otp?.errors?.['maxlength']">Please enter a valid 6-digit code</div>
            </div>
          </div>
          
          <button 
            type="submit" 
            class="btn btn-verify-otp w-100 mb-3"
            [disabled]="isLoading || verifyOtpForm.invalid || countdown <= 0">
            <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
            {{ isLoading ? 'Verifying...' : 'Verify Code' }}
          </button>
          
          <div class="text-center">
            <button 
              type="button" 
              class="btn btn-resend"
              [disabled]="!canResend || isLoading"
              (click)="resendOtp()">
              <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
              {{ isLoading ? 'Sending...' : 'Resend Code' }}
            </button>
          </div>
        </form>
        
        <div class="extra-links text-center mt-3">
          <p class="small text-muted">
            Didn't receive the code? Check your spam folder or try resending.
          </p>
          <p class="small text-muted">
            Rate limited to 5 requests per minute for security
          </p>
        </div>
      </div>
    </div>
  </div>